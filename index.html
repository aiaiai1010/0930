
    function updateSustain(isNow){
      const t = performance.now();
      if (isNow) {
        if (enterStart == null) enterStart = t;
        exitStart = null;
        const elapsed = t - enterStart;
        if (!bentState && elapsed >= PARAMS.sustainMs) {
          bentState = true;
          setWarning(true, '首が曲がっています');
        }
      } else {
        if (exitStart == null) exitStart = t;
        enterStart = null;
        const elapsed = t - exitStart;
    Warning(false, '測定中...');


      if (saved) { PARAMS.calibYdiff = saved.y; PARAMS.calibNoseZ = saved.z; }
    }

    function calibrate(){
      if (sYdiff == null || sNoseZ == null) return;
      PARAMS.calibYdiff = sYdiff; PARAMS.calibNoseZ = sNoseZ;
 
